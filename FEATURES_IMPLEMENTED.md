# æ–°åŠŸèƒ½å®ç°è¯´æ˜

## âœ… å·²å®ç°çš„åŠŸèƒ½

### 1. é‚®ä»¶é€šçŸ¥ç³»ç»Ÿ ğŸ“§
- **è®¢å•ç¡®è®¤é‚®ä»¶**: æ”¯ä»˜æˆåŠŸåè‡ªåŠ¨å‘é€
- **å‘è´§é€šçŸ¥é‚®ä»¶**: åˆ›å»º4PXè®¢å•æˆ–æ›´æ–°è·Ÿè¸ªå·æ—¶å‘é€
- **ç‰©æµæ›´æ–°é‚®ä»¶**: å¯æ‰©å±•æ”¯æŒç‰©æµçŠ¶æ€æ›´æ–°é€šçŸ¥
- **Newsletteræ¬¢è¿é‚®ä»¶**: è®¢é˜…æ—¶å‘é€
- **è¡¥è´§é€šçŸ¥é‚®ä»¶**: äº§å“é‡æ–°æœ‰è´§æ—¶é€šçŸ¥ç­‰å¾…åˆ—è¡¨

**é…ç½®**: 
- å¼€å‘ç¯å¢ƒé»˜è®¤ä½¿ç”¨æ§åˆ¶å°è¾“å‡ºï¼ˆconsoleæ¨¡å¼ï¼‰
- ç”Ÿäº§ç¯å¢ƒå¯é…ç½®Resendç­‰é‚®ä»¶æœåŠ¡
- ç¯å¢ƒå˜é‡: `EMAIL_SERVICE`, `EMAIL_FROM`, `RESEND_API_KEY`

### 2. åº“å­˜ç®¡ç†ç³»ç»Ÿ ğŸ“¦
- **åº“å­˜è·Ÿè¸ª**: å®æ—¶åº“å­˜æ•°é‡ç®¡ç†
- **åº“å­˜æ£€æŸ¥**: APIæ¥å£æ£€æŸ¥åº“å­˜çŠ¶æ€
- **ç¼ºè´§æé†’**: åº“å­˜ä¸º0æ—¶æ˜¾ç¤ºç¼ºè´§çŠ¶æ€
- **ç­‰å¾…åˆ—è¡¨**: ç¼ºè´§æ—¶å¯åŠ å…¥ç­‰å¾…åˆ—è¡¨ï¼Œæœ‰è´§æ—¶è‡ªåŠ¨é€šçŸ¥
- **ä½åº“å­˜è­¦å‘Š**: åº“å­˜ä½äº10ä»¶æ—¶æ˜¾ç¤ºè­¦å‘Š

**æ•°æ®åº“è¡¨**: `Product`
**APIè·¯ç”±**: `/api/inventory/check`

### 3. ä¼˜æƒ åˆ¸/æŠ˜æ‰£ç ç³»ç»Ÿ ğŸŸï¸
- **ä¼˜æƒ åˆ¸éªŒè¯**: æ”¯æŒç™¾åˆ†æ¯”å’Œå›ºå®šé‡‘é¢æŠ˜æ‰£
- **ä½¿ç”¨é™åˆ¶**: æ”¯æŒæœ€ä½æ¶ˆè´¹ã€æœ€å¤§æŠ˜æ‰£ã€ä½¿ç”¨æ¬¡æ•°é™åˆ¶
- **æœ‰æ•ˆæœŸç®¡ç†**: æ”¯æŒå¼€å§‹å’Œç»“æŸæ—¶é—´
- **è®¢å•é›†æˆ**: è®¢å•è®°å½•ä½¿ç”¨çš„ä¼˜æƒ åˆ¸å’ŒæŠ˜æ‰£é‡‘é¢

**æ•°æ®åº“è¡¨**: `Coupon`
**APIè·¯ç”±**: `/api/coupon/validate`

**ç»„ä»¶**: `CouponInput` - å¯åœ¨ç»“è´¦é¡µé¢ä½¿ç”¨

### 4. Newsletteré‚®ä»¶è¥é”€ ğŸ“¬
- **è®¢é˜…åŠŸèƒ½**: ç”¨æˆ·å¯è®¢é˜…Newsletter
- **é€€è®¢åŠŸèƒ½**: æ”¯æŒé€€è®¢
- **æ¬¢è¿é‚®ä»¶**: è®¢é˜…æ—¶è‡ªåŠ¨å‘é€æ¬¢è¿é‚®ä»¶
- **è®¢é˜…ç®¡ç†**: ç®¡ç†å‘˜å¯æŸ¥çœ‹æ‰€æœ‰è®¢é˜…è€…

**æ•°æ®åº“è¡¨**: `Newsletter`
**APIè·¯ç”±**: 
- `/api/newsletter/subscribe`
- `/api/newsletter/unsubscribe`

**ç»„ä»¶**: `NewsletterSignup` - å¯åœ¨é¦–é¡µæˆ–Footerä½¿ç”¨

### 5. è®¢å•å–æ¶ˆå’Œé€€æ¬¾ ğŸ’°
- **è®¢å•å–æ¶ˆ**: ç”¨æˆ·å¯å–æ¶ˆè‡ªå·±çš„è®¢å•
- **é€€æ¬¾è®°å½•**: è®°å½•é€€æ¬¾æ—¶é—´å’ŒåŸå› 
- **åº“å­˜é‡Šæ”¾**: å–æ¶ˆå·²æ”¯ä»˜è®¢å•æ—¶è‡ªåŠ¨é‡Šæ”¾åº“å­˜

**APIè·¯ç”±**: `/api/orders/[orderId]/cancel`

### 6. ç­‰å¾…åˆ—è¡¨åŠŸèƒ½ â°
- **åŠ å…¥ç­‰å¾…åˆ—è¡¨**: ç¼ºè´§æ—¶å¯åŠ å…¥ç­‰å¾…åˆ—è¡¨
- **è‡ªåŠ¨é€šçŸ¥**: äº§å“æœ‰è´§æ—¶è‡ªåŠ¨é€šçŸ¥ç­‰å¾…åˆ—è¡¨ä¸­çš„ç”¨æˆ·
- **æ‰¹é‡é€šçŸ¥**: æ¯æ¬¡æœ€å¤šé€šçŸ¥50äººï¼Œé¿å…é‚®ä»¶æœåŠ¡é™åˆ¶

**æ•°æ®åº“è¡¨**: `Waitlist`
**APIè·¯ç”±**: `/api/waitlist/add`

## ğŸ“‹ æ•°æ®åº“è¿ç§»

è¿è¡Œä»¥ä¸‹å‘½ä»¤åº”ç”¨æ•°æ®åº“è¿ç§»ï¼š

```bash
npx prisma migrate dev --name add_new_features
```

æˆ–è€…æ‰‹åŠ¨æ‰§è¡ŒSQLæ–‡ä»¶ï¼š
```bash
psql -d your_database < prisma/migrations/add_new_features.sql
```

## ğŸ¨ å‰ç«¯ç»„ä»¶

### StockStatus
æ˜¾ç¤ºäº§å“åº“å­˜çŠ¶æ€ï¼Œæ”¯æŒç­‰å¾…åˆ—è¡¨åŠŸèƒ½ï¼š
```tsx
<StockStatus productId="maclock-default" />
```

### CouponInput
ä¼˜æƒ åˆ¸è¾“å…¥ç»„ä»¶ï¼š
```tsx
<CouponInput 
  onApply={(code, discount) => {...}}
  onRemove={() => {...}}
/>
```

### NewsletterSignup
Newsletterè®¢é˜…ç»„ä»¶ï¼š
```tsx
<NewsletterSignup variant="inline" />
```

## ğŸ”§ ç¯å¢ƒå˜é‡é…ç½®

åœ¨ `.env.local` ä¸­æ·»åŠ ï¼š

```env
# é‚®ä»¶æœåŠ¡
EMAIL_SERVICE=console  # æˆ– resend
EMAIL_FROM=noreply@hello1984.com
RESEND_API_KEY=your_resend_api_key

# äº§å“é…ç½®
NEXT_PUBLIC_PRODUCT_PRICE=29900  # $299 in cents
DEFAULT_STOCK=100
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºä¼˜æƒ åˆ¸ï¼ˆç®¡ç†å‘˜ï¼‰
```typescript
import { createCoupon } from '@/lib/coupon'

await createCoupon({
  code: 'WELCOME10',
  description: '10% off for new customers',
  discountType: 'percentage',
  discountValue: 10,
  minAmount: 5000, // $50
  maxDiscount: 5000, // Max $50 off
  usageLimit: 100,
  validFrom: new Date(),
  validUntil: new Date('2024-12-31'),
})
```

### æ£€æŸ¥åº“å­˜
```typescript
import { checkStock, getProductStock } from '@/lib/inventory'

const inStock = await checkStock('maclock-default', 1)
const product = await getProductStock('maclock-default')
```

### å‘é€é‚®ä»¶
```typescript
import { 
  sendOrderConfirmationEmail,
  sendShippingNotificationEmail 
} from '@/lib/email'

await sendOrderConfirmationEmail(order)
await sendShippingNotificationEmail(order)
```

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

1. **é›†æˆå®é™…é‚®ä»¶æœåŠ¡**: é…ç½®Resendæˆ–å…¶ä»–é‚®ä»¶æœåŠ¡æä¾›å•†
2. **Stripeé€€æ¬¾é›†æˆ**: åœ¨è®¢å•å–æ¶ˆæ—¶å®é™…è°ƒç”¨Stripeé€€æ¬¾API
3. **åº“å­˜é¢„è­¦é€šçŸ¥**: ä½åº“å­˜æ—¶é€šçŸ¥ç®¡ç†å‘˜
4. **ä¼˜æƒ åˆ¸ç®¡ç†ç•Œé¢**: ä¸ºç®¡ç†å‘˜åˆ›å»ºä¼˜æƒ åˆ¸ç®¡ç†é¡µé¢
5. **Newsletterç®¡ç†**: åˆ›å»ºNewsletterå‘é€å’Œç®¡ç†ç•Œé¢
6. **è®¢å•å¯¼å‡ºåŠŸèƒ½**: æ”¯æŒCSV/PDFæ ¼å¼å¯¼å‡ºè®¢å•

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `lib/email.ts` - é‚®ä»¶æœåŠ¡
- `lib/inventory.ts` - åº“å­˜ç®¡ç†
- `lib/coupon.ts` - ä¼˜æƒ åˆ¸ç®¡ç†
- `lib/newsletter.ts` - Newsletterç®¡ç†
- `prisma/schema.prisma` - æ•°æ®åº“Schema
- `components/StockStatus.tsx` - åº“å­˜çŠ¶æ€ç»„ä»¶
- `components/CouponInput.tsx` - ä¼˜æƒ åˆ¸è¾“å…¥ç»„ä»¶
- `components/NewsletterSignup.tsx` - Newsletterè®¢é˜…ç»„ä»¶

